<% content_for :title, t('dashboard.page_title') %>

<div class="min-h-full bg-gray-50 dark:bg-gray-900" data-controller="keyboard-shortcuts" data-keyboard-shortcuts-navigable-target-value="navigableItem" data-keyboard-shortcuts-link-selector-value="a[href*='/issues']">
  <%= render 'shared/navbar' %>

  <div class="py-10">
    <header>
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <h1 class="text-3xl font-bold leading-tight tracking-tight text-gray-900 dark:text-white"><%= t('dashboard.welcome_title') %></h1>
      </div>
    </header>
    <main>
      <div class="mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8">
        <% if @recently_updated_repos.any? %>
          <div>
            <h2 class="text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4"><%= t('dashboard.recently_updated_heading') %></h2>
            <div class="bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg divide-y divide-gray-200 dark:divide-gray-700">
              <% @recently_updated_repos.each do |repository| %>
                <div class="px-4 py-4 sm:px-6 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors" data-keyboard-shortcuts-target="navigableItem">
                  <%= link_to repository_issues_path(repository), class: "block" do %>
                    <div class="flex items-center justify-between">
                      <div class="flex-1 min-w-0">
                        <p class="text-sm font-medium text-gray-900 dark:text-gray-100 truncate hover:underline">
                          <%= repository.full_name %>
                        </p>
                        <% if repository.description.present? %>
                          <p class="mt-1 text-sm text-gray-500 dark:text-gray-400 line-clamp-2">
                            <%= repository.description %>
                          </p>
                        <% end %>
                      </div>
                      <div class="ml-4 flex-shrink-0 text-right">
                        <p class="text-xs text-gray-500 dark:text-gray-400">
                          <%= t('dashboard.updated_prefix') %> <%= time_ago_tag(repository.cached_at) %>
                        </p>
                      </div>
                    </div>
                  <% end %>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </main>
  </div>

  <%= render KeyboardShortcutsModalComponent.new(shortcuts: repository_shortcuts) %>
</div>
